<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>이력서 - 김민수</title>
    <style>
      body {
        font-family: "Noto Sans KR", sans-serif;
        margin: 0; /* 이력서 전체의 기본 마진 제거 */
        padding: 0; /* 이력서 전체의 기본 패딩 제거 */
        color: #000;
        background: #fff;
        /* 아래 두 줄은 iframe에서 높이 측정 시 중요합니다. */
        display: flex;
        flex-direction: column;
        box-sizing: border-box; /* 패딩, 보더가 너비/높이에 포함되도록 */
      }
      .container {
        max-width: 800px;
        margin: auto;
        padding: 40px;
        border: 1px solid #ddd;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.05);
        box-sizing: border-box; /* 패딩이 너비에 포함되도록 */
      }
      .header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
      }
      .title {
        line-height: 1.2;
      }
      .title h1 {
        font-size: 20px;
        color: #888;
        margin: 0;
      }
      .title h2 {
        font-size: 28px;
        font-weight: bold;
        margin: 0;
      }
      .photo {
        width: 100px;
        height: 120px;
        object-fit: cover;
      }
      .section {
        margin-top: 40px;
      }
      .section-title {
        font-weight: bold;
        border-bottom: 2px solid #000;
        padding-bottom: 5px;
        margin-bottom: 10px;
        font-size: 16px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      td {
        padding: 8px;
        vertical-align: top;
        border-bottom: 1px solid #eee;
      }
      .footer {
        font-size: 12px;
        color: #666;
        text-align: right;
        margin-top: 30px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="title">
          <h1>이력서</h1>
          <h2>김민수</h2>
        </div>
        <img
          src="https://via.placeholder.com/100x120?text=사진"
          alt="사진"
          class="photo"
        />
      </div>

      <div class="section">
        <div class="section-title">연락처</div>
        <table>
          <tr>
            <td>성명</td>
            <td>김민수 (한글판 / Minsu.Kim)</td>
          </tr>
          <tr>
            <td>주민번호</td>
            <td>123456-0000000</td>
          </tr>
          <tr>
            <td>주소</td>
            <td>서울 가주 구 건산로 한림아파트 15단 102호</td>
          </tr>
          <tr>
            <td>전화번호</td>
            <td>010.1234.4567</td>
          </tr>
          <tr>
            <td>Email</td>
            <td>minsu.kim@canva.com</td>
          </tr>
          <tr>
            <td>링크드인</td>
            <td>linkedin.com/in/minsu-kim</td>
          </tr>
          <tr>
            <td>포트폴리오</td>
            <td>minsu-portfolio.com</td>
          </tr>
        </table>
      </div>

      <div class="section">
        <div class="section-title">학력사항</div>
        <table>
          <tr>
            <td>2003.05~2006.05</td>
            <td>
              엔즈 Canva University 과층-미니에이터드 MFA 작업 전공 / 디자인
              사업
            </td>
          </tr>
          <tr>
            <td>2003.03~2006.03</td>
            <td>엔즈 Canva University 구매전공 프리 건축 / 디자인 사업</td>
          </tr>
          <tr>
            <td>2000.03~2003.02</td>
            <td>서울예술고등학교 미술과 졸업</td>
          </tr>
        </table>
      </div>

      <div class="section">
        <div class="section-title">직장경로</div>
        <table>
          <tr>
            <td>2006.06~현재</td>
            <td>
              회사: (주)디자인비즈<br />직책: 디자인팀 리더 / UXUI 총괄<br />주요업무:
              웹사이트 및 모바일 앱 UI 설계, 사용자 경험 설계, 팀 관리
            </td>
          </tr>
          <tr>
            <td>2003.05~2006.05</td>
            <td>
              회사: (주)아이코드 디자인<br />직책: 과정과 프리로지널 디자인 /
              작업
            </td>
          </tr>
        </table>
      </div>

      <div class="section">
        <div class="section-title">보유기술</div>
        <table>
          <tr>
            <td>디자인 툴</td>
            <td>Adobe Photoshop, Illustrator, XD, Figma</td>
          </tr>
          <tr>
            <td>프로그래밍</td>
            <td>HTML, CSS, JavaScript, React</td>
          </tr>
          <tr>
            <td>기타</td>
            <td>기획서 작성, 고객 커뮤니케이션, 팀 리딩</td>
          </tr>
        </table>
      </div>

      <div class="section">
        <div class="section-title">자격증</div>
        <table>
          <tr>
            <td>2007.08</td>
            <td>웹디자인 기능사</td>
          </tr>
          <tr>
            <td>2008.12</td>
            <td>컴퓨터그래픽스운용기능사</td>
          </tr>
        </table>
      </div>

      <div class="section">
        <div class="section-title">자기소개</div>
        <p class="profile">
          안녕하세요. 저는 15년 이상 UX/UI 디자인과 사용자 경험 설계 업무를
          수행해 온 김민수입니다.<br />
          실무 프로젝트 중심의 디자인 기획과 개발 협업 경험이 풍부하며, 디자인과
          기능의 균형을 추구합니다.<br />
          특히 사용자 중심의 사고로 서비스의 가치를 극대화하는 데에 큰 보람을
          느낍니다.
        </p>
      </div>

      <div class="footer">
        * 위 정보는 사업용 자리서를 기본으로 작성되었습니다.
      </div>
    </div>

    <script>
      function sendIframeHeight() {
        // 'container' 요소의 높이를 측정하는 것이 가장 정확합니다.
        // body의 margin과 padding을 0으로 설정했기 때문에 container의 높이가 곧 콘텐츠의 실제 높이가 됩니다.
        const containerElement = document.querySelector('.container');
        let height = 0;
        if (containerElement) {
            height = containerElement.offsetHeight;
        } else {
            // container가 없다면 fallback으로 body 높이를 사용합니다.
            height = Math.max(
                document.body.scrollHeight,
                document.body.offsetHeight,
                document.documentElement.clientHeight,
                document.documentElement.scrollHeight,
                document.documentElement.offsetHeight
            );
        }

        // 부모 윈도우로 메시지 전송
        if (window.parent) {
          window.parent.postMessage({
            type: 'iframeHeight',
            height: height + 'px', // 단위를 붙여서 보냅니다.
            tempNo: new URLSearchParams(window.location.search).get('tempNo') // 템플릿 번호도 함께 보냅니다.
          }, '*'); // 🚨 중요: 실제 배포 시에는 '*' 대신 부모 컴포넌트의 도메인을 명시하세요!
        }
      }

      // 1. DOMContentLoaded: HTML 문서가 완전히 로드되고 파싱되었을 때 (가장 빠름)
      document.addEventListener('DOMContentLoaded', sendIframeHeight);
      // 2. load: 모든 리소스(이미지 등)까지 완전히 로드되었을 때 (더 정확할 수 있음)
      window.addEventListener('load', sendIframeHeight);
      // 3. 리사이즈 시에도 높이 다시 측정하여 부모에 알림 (반응형 대응)
      window.addEventListener('resize', sendIframeHeight);

      // 4. 추가: 이미지 등 동적으로 로드되는 요소가 있다면, 해당 요소의 로드가 완료된 후 다시 높이를 측정합니다.
      // 현재 이력서 템플릿에는 외부 이미지가 있으므로 이 부분이 특히 중요합니다.
      const images = document.querySelectorAll('img');
      if (images.length > 0) {
        let loadedCount = 0;
        images.forEach(img => {
          if (img.complete) { // 이미 로드 완료된 이미지
            loadedCount++;
          } else { // 아직 로드되지 않은 이미지
            img.addEventListener('load', () => {
              loadedCount++;
              if (loadedCount === images.length) {
                sendIframeHeight(); // 모든 이미지가 로드되면 높이 다시 전송
              }
            });
          }
        });
        if (loadedCount === images.length) { // 이미지가 없거나 모두 로드된 경우에도 초기 높이 전송
          sendIframeHeight();
        }
      }
    </script>
    </body>
</html>